Aim 2: Notebook
===================




## Coding Notebook

```{r include = FALSE}
knitr::read_chunk("./helpers.R")
if (interactive()) source("./helpers.R")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

```{r helpers, message = FALSE, warning = FALSE}
```

```{r, include = FALSE}
knitr::opts_chunk$set(cache = TRUE)
```

Here is the first look at the raw, unscreened, unbinned data.

```{r raw-aim2, out.width = "100%", fig.show = 'hold', fig.height = 3, fig.width = 6, message = FALSE, warning = FALSE, echo = FALSE}
# ## Raw data visualization
# 
# First, let's plot the overall averages from each year.
raw_data %>% 
  mutate(Condition = factor(Condition, c("real", "MP", "nonsense"))) %>% 
  ggplot() + 
    aes(x = Time, y = Prop, color = Age) + 
    geom_hline(size = 2, color = "white", yintercept = .5) +
    stat_summary(fun.data = mean_se) +
    facet_wrap("Condition") + 
    labs(
      x = "Time after noun onset [ms]",
      y = "Proportion looks to familar",
      caption = "Mean ± SE") +
    theme(
      legend.position = c(0.95, 0.95), 
      legend.justification = c(1, 1))

raw_data %>% 
  mutate(Condition = factor(Condition, c("real", "MP", "nonsense"))) %>% 
  ggplot() + 
    aes(x = Time, y = Prop, color = Age) + 
    geom_hline(size = 2, color = "white", yintercept = .5) +
    stat_smooth() +
    facet_wrap("Condition") + 
    labs(
      x = "Time after noun onset [ms]",
      y = "Proportion looks to familar",
      caption = "GAM smooth") +
    theme(
      legend.position = c(0.95, 0.95), 
      legend.justification = c(1, 1))
```

Observations:

  - Probability of looking to familiar image given real word increased in
    year 3. Kind of unexpected that they could improve noticeably on this simple
    two-image task.
  - Probability of looking to unfamiliar given a nonword increases each year.
  - Probability of looking to familiar given a mispronunciation increased
  - 250 to 1500 looks like a reasonable analysis window.
  - Before the onset of the target word, there appears to be some looking
    preferences—maybe—for the familiar at timepoint 1 and unfamiliar
    in timepoint 3.
  - The "peak" growth curve feature will need to be flipped for the nonword
    trials.




```{r clean-aim2, out.width = "100%", fig.show = 'hold', fig.height = 3, fig.width = 6, message = FALSE, warning = FALSE, echo = FALSE}
# Plot the data after partial data screening. We include the curves from the
# earlier plots in gray.

agg_data <- data %>% 
  aggregate_looks(
    resp_def, Study + ResearchID + Condition + Time ~ GazeByImageAOI)

agg_data %>% 
  mutate(Condition = factor(Condition, c("real", "MP", "nonsense"))) %>% 
  ggplot() + 
    aes(x = Time, y = Prop, color = Study) + 
    geom_hline(size = 2, color = "white", yintercept = .5) +
    stat_smooth(
      aes(group = Study), 
      data = raw_data %>% 
        mutate(Condition = factor(Condition, c("real", "MP", "nonsense"))), 
      color = "gray70", se = FALSE) +
    stat_smooth(se = FALSE) +
    facet_wrap("Condition") + 
    labs(
      x = "Time after noun onset [ms]",
      y = "Mean prop. looks to familar",
      caption = "GAM smooth. Screened data drawn over raw data (gray).") +
    guides(colour = guide_legend(override.aes = list(fill = NA))) + 
    theme(
        legend.position = c(0.95, 0.95), 
        legend.justification = c(1, 1))
```

